<!doctype html>
<html>
    <head>
        <title>Redoc</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link
            href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700"
            rel="stylesheet"
        />
        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <style>
            body {
                margin: 0;
                padding: 0;
            }
            /* Ensure Redoc content doesn't get hidden behind navbar */
            redoc {
                display: block;
                margin-top: 56px;
            }
        </style>
    </head>
    <body>
        <!-- Bootstrap Navbar -->
        <nav class="navbar navbar-dark bg-dark fixed-top">
            <div class="container-fluid">
                <a class="navbar-brand d-flex align-items-center" href="#">
                    <svg width="40" height="40" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <svg xmlns="http://www.w3.org/2000/svg" style="background: transparent; background-color: transparent; color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="90px" height="101px" viewBox="-0.5 -0.5 90 101" content="&lt;mxfile host=&quot;app.diagrams.net&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.2 Safari/605.1.15&quot; version=&quot;26.0.4&quot; scale=&quot;1&quot; border=&quot;0&quot;&gt;&#10;  &lt;diagram name=&quot;Page-1&quot; id=&quot;33wf4AJenN43dpRiGz6H&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;153&quot; dy=&quot;206&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-8&quot; value=&quot;&quot; style=&quot;shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;rotation=-90;size=23.940000000000055;strokeColor=#0066CC;fillColor=#0066CC;rounded=1;arcSize=6;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;365.77&quot; y=&quot;420.3&quot; width=&quot;99.12&quot; height=&quot;88.53&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-18&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;strokeColor=#FFFFFF;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;381&quot; y=&quot;457&quot; width=&quot;59&quot; height=&quot;3&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-19&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;strokeColor=#FFFFFF;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;381&quot; y=&quot;464&quot; width=&quot;49&quot; height=&quot;3&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-20&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;strokeColor=#FFFFFF;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;381&quot; y=&quot;471&quot; width=&quot;59&quot; height=&quot;3&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-21&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;strokeColor=#FFFFFF;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;381&quot; y=&quot;478&quot; width=&quot;69&quot; height=&quot;3&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-23&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;strokeColor=#FFFFFF;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;381&quot; y=&quot;484.66&quot; width=&quot;39&quot; height=&quot;3&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-9&quot; value=&quot;&quot; style=&quot;triangle;whiteSpace=wrap;html=1;rotation=-30;rounded=1;fillColor=#B3B3B3;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;385&quot; y=&quot;446&quot; width=&quot;45&quot; height=&quot;38.66&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-16&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;strokeColor=#FFFFFF;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;381&quot; y=&quot;442.5&quot; width=&quot;70&quot; height=&quot;3&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-17&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;strokeColor=#FFFFFF;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;381&quot; y=&quot;450&quot; width=&quot;59&quot; height=&quot;3&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-12&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;arcSize=50;rotation=-30;perimeter=rectanglePerimeter;fillColor=#67AB9F;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;412&quot; y=&quot;445&quot; width=&quot;35&quot; height=&quot;14&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-10&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;arcSize=48;rotation=60;fillColor=#67AB9F;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;405&quot; y=&quot;457&quot; width=&quot;19&quot; height=&quot;7&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-14&quot; value=&quot;&quot; style=&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;435&quot; y=&quot;445&quot; width=&quot;5&quot; height=&quot;5&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;UmqRFwnLn5K5PevdjIdy-15&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;rotation=60;arcSize=50;fillColor=#E6E6E6;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;374&quot; y=&quot;471&quot; width=&quot;34&quot; height=&quot;7&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;"><defs/><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="UmqRFwnLn5K5PevdjIdy-8"><g><path d="M 6.74 27.43 L 17.28 7.94 Q 18.71 5.3 21.71 5.3 L 66.95 5.3 Q 69.95 5.3 71.38 7.94 L 92.46 46.93 Q 93.89 49.56 92.46 52.2 L 71.38 91.19 Q 69.95 93.83 66.95 93.83 L 21.71 93.83 Q 18.71 93.83 17.28 91.19 L -3.8 52.2 Q -5.23 49.56 -3.8 46.93 Z" fill="#0066cc" stroke="#0066cc" stroke-miterlimit="10" transform="rotate(-90,44.33,49.56)" pointer-events="all" style="fill: light-dark(rgb(0, 102, 204), rgb(86, 174, 255)); stroke: light-dark(rgb(0, 102, 204), rgb(86, 174, 255));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-18"><g><rect x="10" y="42" width="59" height="3" rx="0.45" ry="0.45" fill="#ffffff" stroke="#ffffff" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-19"><g><rect x="10" y="49" width="49" height="3" rx="0.45" ry="0.45" fill="#ffffff" stroke="#ffffff" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-20"><g><rect x="10" y="56" width="59" height="3" rx="0.45" ry="0.45" fill="#ffffff" stroke="#ffffff" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-21"><g><rect x="10" y="63" width="69" height="3" rx="0.45" ry="0.45" fill="#ffffff" stroke="#ffffff" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-23"><g><rect x="10" y="69.66" width="39" height="3" rx="0.45" ry="0.45" fill="#ffffff" stroke="#ffffff" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-9"><g><path d="M 14 50.33 L 14 40.66 Q 14 31 23.19 34.95 L 49.81 46.38 Q 59 50.33 49.81 54.28 L 23.19 65.71 Q 14 69.66 14 59.99 Z" fill="#b3b3b3" stroke="#000000" stroke-miterlimit="10" transform="rotate(-30,36.5,50.33)" pointer-events="all" style="fill: light-dark(rgb(179, 179, 179), rgb(83, 83, 83)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-16"><g><rect x="10" y="27.5" width="70" height="3" rx="0.45" ry="0.45" fill="#ffffff" stroke="#ffffff" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-17"><g><rect x="10" y="35" width="59" height="3" rx="0.45" ry="0.45" fill="#ffffff" stroke="#ffffff" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-12"><g><rect x="41" y="30" width="35" height="14" rx="7" ry="7" fill="#67ab9f" stroke="#000000" transform="rotate(-30,58.5,37)" pointer-events="all" style="fill: light-dark(rgb(103, 171, 159), rgb(58, 117, 107)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-10"><g><rect x="34" y="42" width="19" height="7" rx="3.36" ry="3.36" fill="#67ab9f" stroke="#000000" transform="rotate(60,43.5,45.5)" pointer-events="all" style="fill: light-dark(rgb(103, 171, 159), rgb(58, 117, 107)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-14"><g><ellipse cx="66.5" cy="32.5" rx="2.5" ry="2.5" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="UmqRFwnLn5K5PevdjIdy-15"><g><rect x="3" y="56" width="34" height="7" rx="3.5" ry="3.5" fill="#e6e6e6" stroke="#000000" transform="rotate(60,20,59.5)" pointer-events="all" style="fill: light-dark(rgb(230, 230, 230), rgb(39, 39, 39)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g></g></g></g></svg>
                    </svg>
                    <span class="ms-2">KAPI</span>
                </a>
                <!-- Dropdown for versions -->
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="versionDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        Select Version
                    </button>
                    <ul class="dropdown-menu" id="versionList"></ul>
                </div>
            </div>
        </nav>

        <!-- Redoc Component -->
        <redoc id="redoc-container"></redoc>

        <script src="https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js"></script>
        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <script>
            async function fetchVersions() {
                try {
                    const response = await fetch(
                        "https://raw.githubusercontent.com/mariolilliresearch/Kapi/refs/heads/main/version_input.json"
                    );
                    const data = await response.json();
                    const versions = data["kubernetes-version"];
                    const dropdownMenu = document.getElementById("versionList");

                    dropdownMenu.innerHTML = ""; // Clear existing items

                    versions.forEach((version) => {
                        const listItem = document.createElement("li");
                        const link = document.createElement("a");
                        link.className = "dropdown-item";
                        link.href = "#";
                        link.textContent = version;
                        link.onclick = () => updateRedoc(version);
                        listItem.appendChild(link);
                        dropdownMenu.appendChild(listItem);
                    });
                } catch (error) {
                    console.error("Error fetching versions:", error);
                }
            }

            function updateRedoc(version) {
                const redocContainer = document.getElementById("redoc-container");
                redocContainer.setAttribute(
                    "spec-url",
                    `https://raw.githubusercontent.com/mariolilliresearch/Kapi/refs/heads/main/${version}/spec.json`
                );

                // Re-render Redoc
                Redoc.init(
                    `https://raw.githubusercontent.com/mariolilliresearch/Kapi/refs/heads/main/${version}/spec.json`,
                    {},
                    redocContainer
                );

                // Update dropdown button text
                document.getElementById("versionDropdown").textContent = version;
            }

            // Fetch versions on page load
            fetchVersions();
        </script>
    </body>
</html>
